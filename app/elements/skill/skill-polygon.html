<link rel="import" href="/bower_components/chart-elements/chart-radar.html">

<dom-module id="skill-polygon">
	<style>
		:host {
			display: block;
            min-height: 400px;
		}
        #chartContainer {
            padding: 5%;
            width: 90%;
            height: 90%;
        }

        chart-radar {
            height: 350px;
            width: 500px;
        }
	</style>

	<template>
		<template is="dom-if" if="{{dataExists}}">
            <div id="chartContainer" class="horizontal layout">
                <chart-radar id="radar" class="self-center" data="{{chartData}}" options="{{options}}"></chart-radar>
            </div>
		</template>
	</template>
	<script>
		Polymer({
			is: 'skill-polygon',
			properties: {
				skills: {
					type: Object,
					notify: true,
					observer: '_updateChart',
                    value: null
				},
				chartData: {
					type: Object,
					notify: true,
					value: null
				},
				dataExists: {
					type: Boolean,
                    notify: true,
					computed: '_isData(chartData)'
				},
				options: {
					type: Object,
					value: {
						scaleOverride: true,
						scaleSteps: 5,
						scaleStepWidth: 20,
						scaleStartValue: 0
					}
				}
			},
			_isData: function(chartData){
				return !!chartData;
			},
			_updateChart: function(){
				console.log('Doing stufdf with data');
				var labels = [];
				var values = [];
				for(var key in this.skills){
					labels.push(key);
					values.push(this.skills[key] * 100);
				}

				var chartData = {
					labels: labels,
					datasets: [
						{
							label: 'Skills',
							data: values,
							fillColor: 'rgba(151,187,205,0.2)',
							strokeColor: 'rgba(151,187,205,1)',
							pointColor: 'rgba(151,187,205,1)',
							pointStrokeColor: '#fff',
							pointHighlightFill: '#fff',
							pointHighlightStroke: 'rgba(151,187,205,1)'
						}
					]
				};
				this.set('chartData', chartData);
                console.log(this.$$('chart-radar'));
                console.log(this.dataExists);
//                this.$$('#radarChart').updateChart();
			}
		});
	</script>

</dom-module>
