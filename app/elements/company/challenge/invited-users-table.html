<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">
<link rel="import" href="../../../bower_components/paper-datatable/paper-datatable.html">

<dom-module id="invited-users-table">
	<style include="iron-flex">
		:host {
			display: block;
			height: 100%;
		}
		paper-icon-button {
			@apply(--layout-self-center);
		}
	</style>
	<template>
		<invitations-by-challenge-canonical-name-provider canonical-name="[[challenge]]" data="{{invitations}}"></invitations-by-challenge-canonical-name-provider>

		<paper-datatable data="[[invitations]]" class="fullHeight" on-cell-tap="_onClick">
			<paper-datatable-column header="Username" property="username"></paper-datatable-column>
			<paper-datatable-column header="Email" property="email"></paper-datatable-column>
			<paper-datatable-column header="Token" property="token"></paper-datatable-column>
			<paper-datatable-column header="Started" property="started">
				<template>
					<span>{{_formatDate(value)}}</span>
				</template>
			</paper-datatable-column>
			<paper-datatable-column header="Expire" property="expire">
				<template>
					<span>{{_formatDate(value)}}</span>
				</template>
			</paper-datatable-column>
		</paper-datatable>

	</template>
	<script>
		Polymer({
			is: 'invited-users-table',
			_onClick: function(e, d){
				page('/u/' + d.item.username);
			},
			_formatDate: function(d){
				return util.formatDate(d);
			}
		});
	</script>
</dom-module>
